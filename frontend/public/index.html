<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Multi-View Video Sync</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    :root { --bg:#0b0f14; --card:#121821; --text:#e6eef8; --muted:#9bb0c3; --accent:#3ea0ff; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    header { padding:12px 16px; border-bottom:1px solid #1f2a38; display:flex; align-items:center; gap:12px; }
    header h1 { font-size:16px; margin:0; font-weight:600; letter-spacing:0.2px; }
    #controls { display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
    button, input, select { background:#0e1520; color:var(--text); border:1px solid #203044; border-radius:6px; padding:8px 10px; }
    button { cursor:pointer; }
    button.primary { background:var(--accent); color:#00142a; border-color:#2a7bd9; }
    /* Pretty long seek bar */
    .time-badge { font-size:12px; color:#b8c6d8; padding:2px 6px; border:1px solid #203044; border-radius:6px; }
    input[type=range].seek { -webkit-appearance:none; appearance:none; width:min(65vw, 900px); height:6px; background:#1a2433; border-radius:999px; outline:none; border:1px solid #203044; }
    input[type=range].seek::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; background:var(--accent); border-radius:50%; border:1px solid #2a7bd9; box-shadow:0 0 0 4px rgba(62,160,255,0.25); }
    input[type=range].seek::-moz-range-thumb { width:14px; height:14px; background:var(--accent); border:none; border-radius:50%; }
    input[type=range].seek::-webkit-slider-runnable-track { height:6px; background:linear-gradient(90deg, var(--accent) var(--seek-fill, 0%), #1a2433 var(--seek-fill, 0%)); border-radius:999px; }
    input[type=range].seek::-moz-range-track { height:6px; background:#1a2433; border-radius:999px; }
    @media (max-width: 800px) { input[type=range].seek { width: 92vw; } }
    .grid { display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr; gap:10px; padding:10px; height:calc(100vh - 70px); }
    .pane { position:relative; background:var(--card); border:1px solid #1f2a38; border-radius:10px; overflow:hidden; display:flex; flex-direction:column; }
    .pane .topbar { display:flex; gap:8px; padding:8px; background:#0f1623; border-bottom:1px solid #1e2a3a; }
    .pane .status { padding:6px 8px; font-size:12px; color:var(--muted); display:flex; gap:8px; align-items:center; border-bottom:1px solid #1e2a3a; }
    .pane .video-wrap { position:relative; flex:1; background:#000; display:flex; align-items:center; justify-content:center; }
    .pane video, .pane iframe { width:100%; height:100%; display:block; }
    .small-controls { position:absolute; right:8px; top:8px; display:flex; gap:6px; z-index:2; }
    .badge { font-size:11px; padding:2px 6px; border:1px solid #203044; border-radius:999px; color:#b7c6d6; }
    .warn { color:#ffaf45; }
    .nav-link { color: var(--accent); text-decoration: none; padding: 4px 8px; border-radius: 4px; }
    .nav-link:hover { background: rgba(62, 160, 255, 0.1); }
    /* Individual controls styling */
    .individual-controls { 
      display: none; 
      align-items: center; 
      gap: 8px; 
      padding: 8px 12px; 
      background: rgba(15, 22, 35, 0.9); 
      border-top: 1px solid #1e2a3a; 
      font-size: 12px;
    }
    .individual-controls button {
      padding: 4px 8px;
      font-size: 11px;
    }
    .individual-seek {
      -webkit-appearance: none;
      appearance: none;
      flex: 1;
      height: 4px;
      background: #1a2433;
      border-radius: 999px;
      outline: none;
      border: 1px solid #203044;
      margin: 0 6px;
    }
    .individual-seek::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: var(--accent);
      border-radius: 50%;
      border: 1px solid #2a7bd9;
    }
    .individual-seek::-moz-range-thumb {
      width: 12px;
      height: 12px;
      background: var(--accent);
      border: none;
      border-radius: 50%;
    }
    .individual-seek::-webkit-slider-runnable-track {
      height: 4px;
      background: linear-gradient(90deg, var(--accent) var(--seek-fill, 0%), #1a2433 var(--seek-fill, 0%));
      border-radius: 999px;
    }
    .individual-seek::-moz-range-track {
      height: 4px;
      background: #1a2433;
      border-radius: 999px;
    }
    /* Fullscreen mode styles - only videos visible */
    body:fullscreen { background: #000; }
    body:fullscreen header { display: none; }
    body:fullscreen .grid { height: 100vh; width: 100vw; padding: 0; margin: 0; gap: 0; }
    body:fullscreen .pane { border: none; border-radius: 0; background: #000; }
    body:fullscreen .pane .topbar { display: none; }
    body:fullscreen .pane .status { display: none; }
    body:fullscreen .small-controls { display: none; }
    body:fullscreen .individual-controls { display: none; }
    body:fullscreen .pane .video-wrap { background: #000; }
    /* Webkit fullscreen support */
    body:-webkit-full-screen { background: #000; }
    body:-webkit-full-screen header { display: none; }
    body:-webkit-full-screen .grid { height: 100vh; width: 100vw; padding: 0; margin: 0; gap: 0; }
    body:-webkit-full-screen .pane { border: none; border-radius: 0; background: #000; }
    body:-webkit-full-screen .pane .topbar { display: none; }
    body:-webkit-full-screen .pane .status { display: none; }
    body:-webkit-full-screen .small-controls { display: none; }
    body:-webkit-full-screen .individual-controls { display: none; }
    body:-webkit-full-screen .pane .video-wrap { background: #000; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.8/dist/hls.min.js"></script>
  <script>
    window.onYouTubeIframeAPIReady = function(){};
    (function(){
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      document.head.appendChild(tag);
    })();
  </script>
  <script defer src="/static/app.js"></script>
</head>
<body>
  <header>
    <h1>Multi-View Video Sync</h1>
    <a href="/movies" class="nav-link">Websites →</a>
    <div id="controls">
      <button id="play" class="primary">Play</button>
      <button id="play-all">Play All</button>
      <button id="pause">Pause</button>
      <button id="stop">Stop</button>
      <span id="curtime" class="time-badge">0:00</span>
      <input id="seek" class="seek" type="range" min="0" max="100" step="0.01" value="0"/>
      <span id="durtime" class="time-badge">0:00</span>
      <label>Speed
        <select id="rate">
          <option value="0.5">0.5x</option>
          <option value="1" selected>1x</option>
          <option value="1.5">1.5x</option>
          <option value="2">2x</option>
          <option value="5">5x</option>
        </select>
      </label>
      <label>Volume <input id="volume" type="range" min="0" max="1" step="0.01" value="1"/></label>
      <button id="mute">Mute All</button>
      <button id="resync">Resync</button>
      <button id="fullscreen" type="button">Fullscreen</button>
      <span id="sync-indicator" class="badge">Sync: n/a</span>
    </div>
  </header>
  <div class="grid" id="grid"></div>
</body>
</html>
